<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>easyretain.com</title>
<link rel="stylesheet" href="../style.css">
</head>
<style>
    .content{
        display: flex;
    }
   
</style>
<body>
<div class="content" id="content">
    <div class="create-table">
        <input id="table_input" type="text" placeholder="Table name">
        <button onClick="manageTables()" id="manageButton">Create</button>
    </div>

</div>
<script>
const params = new URLSearchParams(window.location.search);

const name = params.get("name").replace(/'/g, "");

document.getElementById("manageButton").innerText = name
const local = "http://127.0.0.1:8000"
const server = "https://python-mysql-api.onrender.com"
const hostNow = server
  


function manageTables() {
    if(name === "create"){
        createTable();
    }else{
        deleteTable();
    }
}

async function createTable() {
        const tab = document.getElementById("table_input").value;
        const response = await fetch(`${hostNow}/create/${tab}`, {
            method: "POST"
        });
        const data = await response.json();
        console.log(data);
        alert("CREATED")
   
    
}


async function deleteTable() {
    const tab = document.getElementById("table_input").value;

    const response = await fetch(`${hostNow}/delete/${tab}`, {
        method: "DELETE"
    });

    const data = await response.json();
    console.log(data);
    alert("DELETED")
}

</script>
</body>
</html>